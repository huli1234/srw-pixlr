!function(e){function t(r){if(i[r])return i[r].exports;var n=i[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,r){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=t.Pixel=function(){function e(t,i,n,s,a,o){r(this,e),this.x=t,this.y=i,this.target=null,this.size=s,this.color=a,this.drawCircles=o,this.distanceToTarget=0,this.borderSize=n}return n(e,[{key:"configureTarget",value:function(e){this.target=e;var t=Math.abs(this.x-this.target.x),i=Math.abs(this.y-this.target.y);t>i?this.distanceToTarget=t:this.distanceToTarget=i}},{key:"hide",value:function(e,t){var i=this,r=Math.random()*t;setTimeout(function(){e.clearRect(i.x*i.size.x,i.y*i.size.y,i.size.x-i.borderSize,i.size.y-i.borderSize)},r)}},{key:"show",value:function(e,t,i){var r=this,n=Math.random()*i;setTimeout(function(){r.drawOnCanvas(t),e()},n)}},{key:"moveToTarget",value:function(){this.x<this.target.x?this.x=this.x+1:this.x>this.target.x&&(this.x=this.x-1),this.y<this.target.y?this.y=this.y+1:this.y>this.target.y&&(this.y=this.y-1)}},{key:"drawOnCanvas",value:function(e){e.fillStyle=this.color,this.drawCircles?(e.beginPath(),e.arc(this.x*this.size.x,this.y*this.size.y,(this.size.x-1)/2,0,2*Math.PI,!1),e.closePath(),e.fill()):e.fillRect(this.x*this.size.x,this.y*this.size.y,this.size.x-this.borderSize,this.size.y-this.borderSize)}},{key:"isSame",value:function(){return this.x===this.target.x&&this.y===this.target.y}}]),e}();t.default=s},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.SeerowReader=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(0),a=i(2);t.SeerowReader=function(){function e(){r(this,e),this.currentImageIndex=0,this.currentPixels=new Array,this.currentPixelArray=new Array,this.isFinished=!1,this.resolution={x:32,y:32},this.imageReader=new a.ImageReader(10*this.resolution.x,10*this.resolution.y),this.targetCanvas=document.getElementById("srw-pxl-drwr-targetcanvas"),this.targetCanvas&&(this.targetContext=this.targetCanvas.getContext("2d")),this.SPEED=50,this.images=document.getElementsByClassName("srw-img-rdr-src"),this.backgroundColor="#2bfeba",this.pixelColor="#0b0b0b",this.fill=!1,this.drawCircles=!1,this.maxDistance=0,this.ledMode=!1,this.duration=2e3,this.borderSize=2}return n(e,[{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.width&&e.height&&(this.targetCanvas.width=e.width,this.targetCanvas.height=e.height),e.resolution&&e.resolution.x&&e.resolution.y&&(this.resolution=e.resolution),e.speed&&(this.SPEED=e.speed),e.pixelColor&&(this.pixelColor=e.pixelColor),e.backgroundColor&&(this.backgroundColor=this.hexToRgb(e.backgroundColor)),e.backgroundOpacity?this.backgroundOpacity=e.backgroundOpacity:this.backgroundOpacity=1,e.fill&&(this.fill=e.fill),e.circle&&(this.drawCircles=e.circle),e.ledMode&&(this.ledMode=e.ledMode),e.borderSize&&(this.borderSize=e.borderSize),e.duration&&(this.duration=e.duration),this.imageReader.setOptions(e)}},{key:"fillCanvas",value:function(){if(this.targetContext.fillStyle="rgba("+this.backgroundColor.r+","+this.backgroundColor.g+","+this.backgroundColor.b+","+this.backgroundOpacity+")",this.drawCircles)this.drawCircles&&this.targetContext.fillRect(0,0,this.targetCanvas.width,this.targetCanvas.height);else for(var e=0;e<=this.resolution.x;e++)for(var t=0;t<=this.resolution.y;t++)this.targetContext.clearRect(e*this.pixelSize().x,t*this.pixelSize().y,this.pixelSize().x-this.borderSize,this.pixelSize().y-this.borderSize)}},{key:"draw",value:function(){var e=this;return new Promise(function(t,i){e.ledMode||(e.targetContext.clearRect(0,0,e.targetCanvas.width,e.targetCanvas.height),e.fillCanvas()),e.targetContext.fillStyle=e.pixelColor;var r;if(e.currentPixelArray.length>0&&(r=e.currentPixelArray),!r){var n=e.images[e.currentImageIndex];r=e.imageReader.getPixels(n)}var s=e.imageReader.createPixels(r);s.forEach(function(t){t.size=e.pixelSize(),t.color=e.pixelColor,t.drawCircles=e.drawCircles,t.borderSize=e.borderSize}),e.currentPixels.length>0?e.ledMode?(e.targetContext.globalAlpha=0,e.currentPixels.forEach(function(t){return t.hide(e.targetContext,e.duration/2)}),setTimeout(function(){e.targetContext.globalAlpha=1;var i=[];s.forEach(function(t){var r=new Promise(function(i,r){t.show(i,e.targetContext,e.duration/2)});i.push(r)}),Promise.all(i).then(function(){t()})},e.duration/2+200),e.currentPixels=s):(e.mapPixels(s,e.targetContext),e.movePixels(e.currentPixels,e.targetContext)):e.drawOnCanvas(s,e.targetContext)})}},{key:"movePixels",value:function(e,t){var i=this;if(!this.isFinished){var r=!0;e.forEach(function(e){e.moveToTarget(),e.isSame()||(r=!1)}),this.isFinished=r,this.targetContext.fillStyle="rgba("+this.backgroundColor.r+","+this.backgroundColor.g+","+this.backgroundColor.b+","+this.backgroundOpacity+")",this.fillCanvas(),e.forEach(function(e){e.drawOnCanvas(t)}),this.isFinished||setTimeout(function(){i.movePixels(e,t)},this.SPEED)}}},{key:"drawOnCanvas",value:function(e,t){this.currentPixels=e,e.forEach(function(e){e.drawOnCanvas(t)})}},{key:"mapPixels",value:function(e,t){var i=this,r=e.length-this.currentPixels.length;new Array;if(r>0)for(var n=0;n<r;n++){var a=this.currentPixels[Math.floor(Math.random()*this.currentPixels.length)],o=new s.Pixel(a.x,a.y,this.borderSize,this.pixelSize(),this.pixelColor,this.drawCircles);this.currentPixels.push(o)}else if(r<0)for(var n=r;n<0;n++){var l=Math.floor(Math.random()*(this.currentPixels.length-1));this.currentPixels.splice(l,1)[0]}this.currentPixels.forEach(function(t){t.configureTarget(e.pop())}),this.currentPixels.forEach(function(e){e.distanceToTarget>i.maxDistance&&(i.maxDistance=e.distanceToTarget)}),this.currentPixels.forEach(function(e){e.setRandomSteps(i.maxDistance)})}},{key:"changeImage",value:function(){return this.isFinished=!1,this.currentImageIndex++,this.currentImageIndex>=this.images.length&&(this.currentImageIndex=0),this.draw()}},{key:"setNewImage",value:function(e){var t=this;return new Promise(function(i,r){e.length!=t.resolution.x&&e[0].length!=t.resolution.y?r(new Error("provided array doesnt match resolution of drwr")):(t.currentPixelArray=e,t.draw().then(i,r))})}},{key:"pixelSize",value:function(){return{x:Math.floor(this.targetCanvas.width/this.resolution.x),y:Math.floor(this.targetCanvas.height/this.resolution.y)}}},{key:"hexToRgb",value:function(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;e=e.replace(t,function(e,t,i,r){return t+t+i+i+r+r});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null}}]),e}()},function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.ImageReader=void 0;var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),s=i(0);t.ImageReader=function(){function e(){r(this,e),this.resolution={x:32,y:32},this.canv=document.createElement("canvas"),this.context=this.canv.getContext("2d"),this.context.clearRect(0,0,10*this.resolution.x,10*this.resolution.y),this.canv.id="srw-img-canvas",this.canv.style.cssText="display:none",document.body.appendChild(this.canv)}return n(e,[{key:"setOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.resolution&&e.resolution.x&&e.resolution.y&&(this.resolution=e.resolution),e.fill&&(this.fill=e.fill)}},{key:"getPixels",value:function(e){this.context.clearRect(0,0,10*this.resolution.x,10*this.resolution.y),e.crossOrigin="Anonymous",this.context.drawImage(e,0,0,this.resolution.x,this.resolution.y);for(var t=this.context.getImageData(0,0,this.resolution.x,this.resolution.y),i=new Array,r=new Array,n=0;n<=this.resolution.x;n++)i.push([]);for(var n=0;n<=this.resolution.y;n++)r.push([]);for(var n=0;n<t.data.length;n+=4){var s=Math.floor(n/(4*this.resolution.y)),a=0;a=s>0?Math.floor(n/4%(s*this.resolution.x)):n/4,t.data[n+3]>150?i[a][s]=1:i[a][s]=0}return i}},{key:"createPixels",value:function(e){for(var t=new Array,i=0;i<e.length;i++)for(var r=0;r<e[i].length;r++)if(this.fill){if(1===e[i][r]){var n=new s.Pixel(i,r);t.push(n)}}else if(i+2>=e.length)newPixels[i][r]=0;else if(0===i)newPixels[i][r]=0;else if(0===r)newPixels[i][r]=0;else if(r+2>=e[i].length)newPixels[i][r]=0;else if(1!==e[i][r]||0!==e[i-1][r]&&0!==e[i+1][r]&&0!==e[i][r+1]&&0!==e[i][r-1])newPixels[i][r]=0;else{var n=new s.Pixel(i,r);t.push(n)}return t}}]),e}()},function(e,t,i){"use strict";var r=i(1);!function(e){function t(){var e={},t=new r.SeerowReader;return e.options=function(e){t.setOptions(e)},e.draw=function(){t.draw()},e.changeImage=function(){return t.changeImage()},e.setNewImage=function(e){return t.setNewImage(e)},e}"undefined"==typeof SrwPixelDrawer?e.SrwPixelDrawer=t():console.log("SrwPixelDrawer already defined.")}(window)}]);